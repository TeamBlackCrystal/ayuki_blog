<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>qt5 on あゆき's BLOG</title><link>https://example.org/tags/qt5/</link><description>Recent content in qt5 on あゆき's BLOG</description><generator>Hugo -- gohugo.io</generator><language>ja-JP</language><lastBuildDate>Sat, 04 Jul 2020 00:00:00 +0000</lastBuildDate><atom:link href="https://example.org/tags/qt5/index.xml" rel="self" type="application/rss+xml"/><item><title>qt5をbuildしてみる</title><link>https://example.org/p/qt5%E3%82%92build%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B/</link><pubDate>Sat, 04 Jul 2020 00:00:00 +0000</pubDate><guid>https://example.org/p/qt5%E3%82%92build%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B/</guid><description>&lt;!-- markdownlint-disable MD033 -->
&lt;!-- more -->
&lt;p>!!! info tip
chocoにもscoop&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>にもねぇ&lt;/p>
&lt;!-- toc -->
&lt;h2 id="はじめに">はじめに&lt;/h2>
&lt;p>なぜか知らんが、mozcをwindowsでbuildしたくなったが、qtがないのでbuildしてみる。&lt;/p>
&lt;h2 id="環境">環境&lt;/h2>
&lt;ul>
&lt;li>git&lt;/li>
&lt;li>python2.7&lt;/li>
&lt;li>perl&lt;/li>
&lt;li>make (いるのこれ？)&lt;/li>
&lt;/ul>
&lt;p>!!! info tip
追加でvsを準備してください。C関係が必要です。&lt;/p>
&lt;h3 id="どうやって入れるの">どうやって入れるの？&lt;/h3>
&lt;p>めんどくさいのでパッケージマネージャーを使いましょう。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="n">scoop&lt;/span> &lt;span class="n">bucket&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="n">versions&lt;/span>
&lt;span class="n">scoop&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">git&lt;/span> &lt;span class="n">python27&lt;/span> &lt;span class="n">perl&lt;/span> &lt;span class="n">make&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="下準備">下準備&lt;/h2>
&lt;p>!!! info tip
&lt;code>~/work&lt;/code>を作業場所として想定しています。&lt;/p>
&lt;p>まずは、git cloneをしましょう。これをしないと始まらないもんね。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">git clone git://code.qt.io/qt/qt5.git
&lt;span class="c1">#リポジトリ内に移動&lt;/span>
&lt;span class="nb">cd&lt;/span> qt5
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>このままでもいいのですが、ときが進みqt6が出たときに問題が発生しそうなので、しっかりとcheckoutしましょう。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">git checkout v5.15.0
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>このままだと、準備が完璧ではないので、仕上げに次のものを実行します。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">perl init-repository --module-subset&lt;span class="o">=&lt;/span>qtbase
&lt;span class="c1">#エラーが出たら &amp;#34;-f&amp;#34; をつけましょう。&lt;/span>
&lt;span class="c1">#~/work直下に移動&lt;/span>
&lt;span class="nb">cd&lt;/span> ..
mkdir qt5_build
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="build-start">build start!!!&lt;/h2>
&lt;p>!!! info tip
スタートメニューから&lt;code>x64 Native Tools Command Prompt for VS 2019&lt;/code>を探して実行しましょう。(2019は環境によっては、2017や2015)
windowがおかしくなる場合は&lt;code>x64 Native Tools Command Prompt for VS 2019&lt;/code>の実態のbatファイルをwindows-terminal等で動いたcmdで実行することができます。
例:&lt;code>H:\VisualStudio\2019\Community\VC\Auxiliary\Build\vcvars64.bat&lt;/code>&lt;/p>
&lt;p>いざ、びるど&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1">#~/work/qt5_build&lt;/span>
..&lt;span class="se">\q&lt;/span>t5&lt;span class="se">\c&lt;/span>onfigure -developer-build -opensource -nomake examples -nomake tests
nmake
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="最後に">最後に&lt;/h2>
&lt;p>&lt;del>これを書いてる時点では結果が出てないけど、多分動くと思う。&lt;/del>
32bitでビルドしないと、mozc用としては使えないの忘れてた・・・&lt;/p>
&lt;section class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1" role="doc-endnote">
&lt;p>古いのはあるがないのと同じ&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/section></description></item></channel></rss>